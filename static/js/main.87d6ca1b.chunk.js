(this["webpackJsonpreact-stock-dashboard"]=this["webpackJsonpreact-stock-dashboard"]||[]).push([[0],{27:function(e,t,a){e.exports=a(56)},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(21),s=a.n(c),o=a(2),l=a(3),i=a(5),d=a(4),u=a(6),h=a.n(u),p=a(25),m=a(26),v=a(10),f=a(22),b=a.n(f).a.create({baseURL:"https://finnhub.io/api/v1/"}),y=(a(50),a(8),a(11)),g=function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={search_stockArray:[],loading_api:!1,inputValue:""},e.disableSearchButton=function(){var t=e.state.inputValue;document.querySelector(".btn-search").disabled=!t||t.length>4},e.loadSavedStocks=function(){if(localStorage.getItem("historyStockArray")){var t=JSON.parse(localStorage.getItem("historyStockArray"));window.confirm("You have saved stocks. Would you like to load them?")?t.forEach((function(t){return e.sendSearchResult(!1,t)})):localStorage.removeItem("historyStockArray")}},e.sendSearchResult=function(){var t=Object(v.a)(h.a.mark((function t(a,r){var n,c,s,o,l,i,d;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a?document.querySelector(".stock-code__value").value.toUpperCase():r,c=Math.round((new Date).getTime()/1e3),s=c-259200,!e.state.search_stockArray.includes(n)){t.next=7;break}return alert("Already exists"),document.querySelector(".stock-code__value").value="",t.abrupt("return");case 7:return t.prev=7,e.setState({loading_api:!0}),t.next=11,Promise.all([b.get("/quote",{params:{symbol:n,token:"bqhq9i7rh5rbubolrqd0"}}),b.get("/stock/candle",{params:{symbol:n,resolution:5,from:s,to:c,token:"bqhq9i7rh5rbubolrqd0"}})]);case 11:o=t.sent,l=Object(m.a)(o,2),i=l[0],d=l[1],0===i.data.c&&0===i.data.h&&0===i.data.l&&0===i.data.o&&0===i.data.pc&&0===i.data.t?e.props.sendSearchGraphResult("no_data",""):(e.props.sendSearchGraphResult(!0,{stockValue:n,response:d.data}),e.props.sendSearchResult(i.data)),e.setState((function(e){return{search_stockArray:[].concat(Object(p.a)(e.search_stockArray),[n]),loading_api:!1,inputValue:""}})),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(7),console.error("API error:",t.t0),e.setState({loading_api:!1});case 23:case"end":return t.stop()}}),t,null,[[7,19]])})));return function(e,a){return t.apply(this,arguments)}}(),e.handleInputChange=function(t){e.setState({inputValue:t.target.value},e.disableSearchButton)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.disableSearchButton(),this.loadSavedStocks()}},{key:"componentDidUpdate",value:function(){this.disableSearchButton()}},{key:"render",value:function(){var e=this,t=this.state,a=t.inputValue,r=t.loading_api;return n.a.createElement("div",{className:"card card-container search"},n.a.createElement("div",{className:"card-body"},n.a.createElement("h2",{className:"h6 mb-0"},"Search Stock Code:"),n.a.createElement("input",{type:"text",className:"form-control stock-code__value",placeholder:"Stock Code (e.g. AAPL)",value:a,onChange:this.handleInputChange}),n.a.createElement("button",{className:"btn btn-secondary w-100 btn-search",onClick:function(){return e.sendSearchResult(!0,"")},disabled:r},"Search Results",n.a.createElement(y.b,null))))}}]),a}(r.Component),D=(a(51),function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={validator_start_date:"",validator_end_date:""},e.start_dateValidator=function(t){var a=new Date;e.setState({validator_start_date:t},(function(){Date.parse(e.state.validator_start_date)<Date.parse(e.state.validator_end_date)&&Date.parse(e.state.validator_start_date)<a&&Date.parse(e.state.validator_end_date)<a?document.querySelector(".btn-filter").disabled=!1:document.querySelector(".btn-filter").disabled=!0}))},e.end_dateValidator=function(t){var a=new Date;e.setState({validator_end_date:t},(function(){Date.parse(e.state.validator_start_date)<Date.parse(e.state.validator_end_date)&&Date.parse(e.state.validator_end_date)<a?document.querySelector(".btn-filter").disabled=!1:document.querySelector(".btn-filter").disabled=!0}))},e.filterMyChart=Object(v.a)(h.a.mark((function t(){var a,r,n,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=document.querySelector(".filter-select").value,r=new Date(document.querySelector("input.start-date").value)/1e3,n=new Date(document.querySelector("input.end-date").value)/1e3,t.next=5,b.get("/stock/candle",{params:{symbol:a,resolution:5,from:r,to:n,token:"bqhq9i7rh5rbubolrqd0"}});case 5:c=t.sent,e.props.getFilteredData([r,n],{stockValue:a,response:c.data}),document.querySelector("input.start-date").value="",document.querySelector("input.end-date").value="";case 9:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){this.props.showFilterDOM&&(document.querySelector(".btn-filter").disabled=!0)}},{key:"render",value:function(){var e,t=this;return e=this.props.showGraphData.map((function(e,a){return n.a.createElement("option",{value:e.stockValue,key:a,selected:t.props.showGraphData[t.props.showGraphData.length-1]===e?"selected":""},e.stockValue)})),n.a.createElement("div",{className:"card card-container filter"},n.a.createElement("div",{className:"card-body"},n.a.createElement("h2",{className:"h6 mb-2"},"Filter by Stock Code:"),this.props.showFilterDOM?n.a.createElement("div",null,n.a.createElement("select",{className:"custom-select filter-select"},e),n.a.createElement("div",{className:"d-flex filter-card-date mt-2"},n.a.createElement("div",{className:"filter-card-date-div"},n.a.createElement("label",{className:"mb-0"},"Start Date:"),n.a.createElement("input",{className:"form-control start-date",type:"date",onChange:function(e){return t.start_dateValidator(e.target.value)}})),n.a.createElement("div",{className:"filter-card-date-div"},n.a.createElement("label",{className:"mb-0"},"End Date:"),n.a.createElement("input",{className:"form-control end-date",type:"date",onChange:function(e){return t.end_dateValidator(e.target.value)}}))),n.a.createElement("button",{className:"btn btn-secondary w-100 mt-3 btn-filter",onClick:this.filterMyChart},"Filter ",n.a.createElement(y.a,null))):n.a.createElement("p",{className:"mb-0 no-filter-message"},"No Stock Code to Filter. Please search stock code for more details")))}}]),a}(r.Component)),k=(a(52),function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={currency:"$"},e}return Object(l.a)(a,[{key:"render",value:function(){var e,t=this;return e=this.props.tableData.map((function(e,a){return"Symbol not supported"!==e?n.a.createElement("tr",{key:a},n.a.createElement("th",{scope:"row"},t.props.graphData[a].stockValue),n.a.createElement("td",null,new Date(1e3*e.t).toLocaleDateString()),n.a.createElement("td",{className:"".concat(t.state.currency+e.o.toFixed(2)>t.state.currency+e.pc.toFixed(2)?"green-text":"red-text"," font-weight-bold")},t.state.currency+e.o.toFixed(2)),n.a.createElement("td",{className:"".concat(t.state.currency+e.l.toFixed(2)>t.state.currency+e.pc.toFixed(2)?"green-text":"red-text"," font-weight-bold")},t.state.currency+e.l.toFixed(2)),n.a.createElement("td",{className:"".concat(t.state.currency+e.h.toFixed(2)>t.state.currency+e.pc.toFixed(2)?"green-text":"red-text"," font-weight-bold")},t.state.currency+e.h.toFixed(2)),n.a.createElement("td",{className:"".concat(t.state.currency+e.c.toFixed(2)<t.state.currency+e.pc.toFixed(2)?"green-text":"red-text"," font-weight-bold")},t.state.currency+e.pc.toFixed(2)),n.a.createElement("td",{className:"".concat(t.state.currency+e.c.toFixed(2)>t.state.currency+e.pc.toFixed(2)?"green-text":"red-text"," font-weight-bold")},t.state.currency+e.c.toFixed(2)),n.a.createElement("td",{className:"".concat(t.state.currency+e.c.toFixed(2)>t.state.currency+e.pc.toFixed(2)?"green-text":"red-text"," font-weight-bold")},"".concat((100-e.pc.toFixed(2)/e.c.toFixed(2)*100).toFixed(2),"%"))):null})),n.a.createElement("div",{className:"card card-container table-data"},n.a.createElement("div",{className:"card-body"},n.a.createElement("h2",{className:"h6 mb-3"},"Latest available data:"),this.props.showTableData?n.a.createElement("div",{className:"table-responsive"},n.a.createElement("table",{className:"table table-striped"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"Stock Code"),n.a.createElement("th",{scope:"col"},"Last Updated Data"),n.a.createElement("th",{scope:"col"},"Open Price"),n.a.createElement("th",{scope:"col"},"Low Price"),n.a.createElement("th",{scope:"col"},"High Price"),n.a.createElement("th",{scope:"col"},"Previous Close Price"),n.a.createElement("th",{scope:"col"},"Current Price"),n.a.createElement("th",{scope:"col"},"% From Yesterday"))),n.a.createElement("tbody",null,e))):n.a.createElement("p",{className:"mb-0 no-data-message"},"There is currently no available data. Please search for a stock code for more details.")))}}]),a}(n.a.Component)),E=a(23),S=a(24),w=a.n(S),_=(a(55),function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).chartRef=n.a.createRef(),e.chartInstance=null,e.handleMouseEnter=function(){if(e.chartInstance){var t=e.chartInstance.data.datasets[0];t.borderColor="rgba(255, 99, 132, 1)",t.borderWidth=3,e.chartInstance.update({duration:200,easing:"linear"})}},e.handleMouseLeave=function(){if(e.chartInstance){var t=e.chartInstance.data.datasets[0];t.borderColor="rgba(129, 183, 55, 1)",t.borderWidth=2,e.chartInstance.update({duration:200,easing:"linear"})}},e.convertToDate=function(e){var t=new Date(e),a=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return"".concat(t.getFullYear(),"-").concat(a,"-").concat(r)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.createChart()}},{key:"componentDidUpdate",value:function(e){this.props.showGraphData&&e.graphData!==this.props.graphData&&this.updateChart()}},{key:"createChart",value:function(){var e=this.props.graphData,t=e.y_axis[0]<e.y_axis[e.y_axis.length-1]?"#81b737":"#d54f4f",a=Object(E.a)({responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{enabled:!0,mode:"point"}},scales:{x:{display:!1,grid:{display:!0,color:"rgba(0, 0, 0, 0.1)"}},y:{display:!0,stepSize:5,grid:{display:!0,color:"rgba(0, 0, 0, 0.1)"}}},elements:{point:{radius:0}}},"plugins",{legend:{display:!1}}),r=this.chartRef.current.getContext("2d");this.chartInstance=new w.a(r,{type:"line",data:{labels:e.x_axis,datasets:[{data:e.y_axis,backgroundColor:"rgba(0, 0, 0, 0)",borderColor:t,borderWidth:2}]},options:a}),this.chartRef.current.addEventListener("mouseenter",this.handleMouseEnter),this.chartRef.current.addEventListener("mouseleave",this.handleMouseLeave)}},{key:"updateChart",value:function(){var e=this.props.graphData;this.chartInstance.data.labels=e.x_axis,this.chartInstance.data.datasets[0].data=e.y_axis,this.chartInstance.update()}},{key:"render",value:function(){var e=this.props.graphData;return n.a.createElement("div",{className:"main__chart",id:"myChart-".concat(e.stockValue)},n.a.createElement("div",null,n.a.createElement("h2",{className:"h5 mb-3 stockValue"},e.stockValue,e.date_data?n.a.createElement("div",{className:"ml-2 d-inline"},n.a.createElement("span",null,"(",this.convertToDate(e.date_data.filteredStartDate),"\xa0to\xa0",this.convertToDate(e.date_data.filteredEndDate),")")):n.a.createElement("div",{className:"ml-2 d-inline"},"(Last 72 Hours)")),n.a.createElement("canvas",{className:"myChart",ref:this.chartRef})))}}]),a}(r.Component)),N=function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={tableData:[],graphData:[],activeStockValue:"",showFilterDOM:!1,showFilterData:!1,showTableData:!1,showGraphData:!1,lsArray:[],option:[]},e.sendSearchResult=function(t){"Symbol not supported"!==t&&e.setState({tableData:e.state.tableData.concat(t),showFilterDOM:!0,showTableData:!0})},e.getFilteredData=function(t,a){for(var r=e.state.graphData,n=[],c=0;c<r.length;c++){var s=r[c];if(-1!==a.stockValue.indexOf(s.stockValue)){n=[];for(var o=0;o<a.response.t.length;o++)n.push(new Date(1e3*a.response.t[o]));r.splice(c,1),r.push({stockValue:a.stockValue,x_axis:n,y_axis:a.response.c,date_data:{filteredStartDate:new Date(1e3*t[0]),filteredEndDate:new Date(1e3*t[1])}}),e.setState({graphData:r,activeStockValue:a.stockValue,showGraphData:!0},(function(){e.setState({showGraphData:!0})}))}}},e.sendSearchGraphResult=function(t,a){if("no_data"!==t){var r=[];if(e.setState({lsArray:e.state.lsArray.concat(a.stockValue)},(function(){localStorage.setItem("historyStockArray",JSON.stringify(e.state.lsArray))})),"no_data"!==a.response.s){for(var n=0;n<a.response.t.length;n++)r.push(new Date(1e3*a.response.t[n]));e.setState({graphData:e.state.graphData.concat({stockValue:a.stockValue,x_axis:r,y_axis:a.response.c}),activeStockValue:a.stockValue,showGraphData:!0},(function(){e.setState({showGraphData:!0})}))}else e.setState({graphData:e.state.graphData.concat({stockValue:a.stockValue,response:"no_data",showGraphData:!0})},(function(){e.setState({showGraphData:!0})}))}else alert("Stock Code does not exist within the Database."),window.location.reload(!0)},e.checkStockCode=function(t){e.state.graphData.map((function(t,a){var r=document.querySelector("#myChart-"+t.stockValue);r&&(r.style.display="none"),a===e.state.graphData.length-1&&(r.style.display="block")})),e.setState({activeStockValue:t})},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){var e=this;this.state.graphData.map((function(t,a){var r=document.querySelector("#myChart-"+t.stockValue);r&&(r.style.display="none"),a===e.state.graphData.length-1&&(r.style.display="block")}))}},{key:"render",value:function(){var e,t=this,a="";return this.state.showGraphData&&(a=this.state.graphData.map((function(e,a){if("no_data"!==e.response){var r=e.stockValue===t.state.activeStockValue?"block":"none";return n.a.createElement(_,{key:a,tableData:t.state.tableData,showGraphData:t.state.showGraphData,showActiveStockCode:t.state.activeStockValue,graphData:e,filteredData:t.state.filteredData,showFilterData:t.state.showFilterData,displayStyle:r})}return n.a.createElement("p",{key:a,className:"no-graph-data-message"},"No Data Currently Available. Markets are closed during weekends and public holidays. Please filter by previous date.")}))),e=this.state.graphData.map((function(e,a){return n.a.createElement("option",{value:e.stockValue,key:a,selected:t.state.graphData[t.state.graphData.length-1]===e?"selected":""},e.stockValue)})),n.a.createElement("div",{className:"container-fluid app-container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-2 sidebar"},n.a.createElement("ul",{className:"nav flex-column"},n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{className:"nav-link active",href:"#"},"Dashboard")),n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{className:"nav-link",href:"#"},"Settings")),n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{className:"nav-link",href:"#"},"Accounts")),n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{className:"nav-link",href:"#"},"Orders")))),n.a.createElement("div",{className:"col-lg-10 content"},n.a.createElement("div",{className:"row app-container__row"},n.a.createElement("div",{className:"col-12 app-container__container"},n.a.createElement("div",{className:"app-container__left"},n.a.createElement(g,{sendSearchResult:this.sendSearchResult,sendSearchGraphResult:this.sendSearchGraphResult}),n.a.createElement(D,{showFilterDOM:this.state.showFilterDOM,showGraphData:this.state.graphData,showActiveStockCode:this.state.activeStockValue,getFilteredData:this.getFilteredData})),n.a.createElement("div",{className:"app-container__right"},n.a.createElement("div",{className:"card card-container graph"},n.a.createElement("div",{className:"card-body"},this.state.showGraphData?n.a.createElement("div",null,n.a.createElement("select",{className:"custom-select main__chart-select",onChange:function(e){return t.checkStockCode(e.target.value)}},e),a):n.a.createElement("p",{className:"no-graph-data-message"},"No current stock found. Please go to the first box and search for a stock.")))))),n.a.createElement("div",{className:"row table-data-row"},n.a.createElement("div",{className:"col-12 table-data-col"},n.a.createElement(k,{showTableData:this.state.showTableData,tableData:this.state.tableData,graphData:this.state.graphData}))))))}}]),a}(n.a.Component);s.a.render(n.a.createElement(N,null),document.querySelector("#root"))},8:function(e,t,a){}},[[27,1,2]]]);
//# sourceMappingURL=main.87d6ca1b.chunk.js.map