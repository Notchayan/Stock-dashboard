{"ast":null,"code":"var _jsxFileName = \"/Users/chayankumawat/Desktop/react-stock-dashboard-master/src/components/SearchCard.js\";\nimport React, { Component } from 'react';\nimport stock from '../apis/stock';\nimport '../css/SearchCard.css';\nimport '../css/styles.css';\nimport { FaSearch } from 'react-icons/fa';\n\nclass SearchCard extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      search_stockArray: [],\n      loading_api: false,\n      inputValue: ''\n    };\n\n    this.disableSearchButton = () => {\n      const {\n        inputValue\n      } = this.state;\n      const btnDOM = document.querySelector('.btn-search');\n      btnDOM.disabled = !inputValue || inputValue.length > 4;\n    };\n\n    this.loadSavedStocks = () => {\n      if (localStorage.getItem('historyStockArray')) {\n        const lsArray = JSON.parse(localStorage.getItem('historyStockArray'));\n        const loadStocks = window.confirm('You have saved stocks. Would you like to load them?');\n\n        if (loadStocks) {\n          lsArray.forEach(stockCode => this.sendSearchResult(false, stockCode));\n        } else {\n          localStorage.removeItem('historyStockArray');\n        }\n      }\n    };\n\n    this.sendSearchResult = async (torf, value) => {\n      const stockValue = torf ? document.querySelector('.stock-code__value').value.toUpperCase() : value;\n      const startDate = Math.round(new Date().getTime() / 1000);\n      const endDate = startDate - 72 * 3600;\n\n      if (this.state.search_stockArray.includes(stockValue)) {\n        alert('Already exists');\n        document.querySelector('.stock-code__value').value = '';\n        return;\n      }\n\n      try {\n        this.setState({\n          loading_api: true\n        });\n        const [table_response, graph_response] = await Promise.all([stock.get('/quote', {\n          params: {\n            symbol: stockValue,\n            token: 'bqhq9i7rh5rbubolrqd0'\n          }\n        }), stock.get('/stock/candle', {\n          params: {\n            symbol: stockValue,\n            resolution: 5,\n            from: endDate,\n            to: startDate,\n            token: 'bqhq9i7rh5rbubolrqd0'\n          }\n        })]);\n\n        if (table_response.data.c === 0 && table_response.data.h === 0 && table_response.data.l === 0 && table_response.data.o === 0 && table_response.data.pc === 0 && table_response.data.t === 0) {\n          this.props.sendSearchGraphResult('no_data', '');\n        } else {\n          this.props.sendSearchGraphResult(true, {\n            stockValue,\n            response: graph_response.data\n          });\n          this.props.sendSearchResult(table_response.data);\n        }\n\n        this.setState(prevState => ({\n          search_stockArray: [...prevState.search_stockArray, stockValue],\n          loading_api: false,\n          inputValue: '' // Clear input field\n\n        }));\n      } catch (error) {\n        console.error('API error:', error);\n        this.setState({\n          loading_api: false\n        });\n      }\n    };\n\n    this.handleInputChange = e => {\n      this.setState({\n        inputValue: e.target.value\n      }, this.disableSearchButton);\n    };\n  }\n\n  componentDidMount() {\n    this.disableSearchButton();\n    this.loadSavedStocks();\n  }\n\n  componentDidUpdate() {\n    this.disableSearchButton();\n  }\n\n  render() {\n    const {\n      inputValue,\n      loading_api\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-container search\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"h6 mb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }\n    }, \"Search Stock Code:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control stock-code__value\",\n      placeholder: \"Stock Code (e.g. AAPL)\",\n      value: inputValue,\n      onChange: this.handleInputChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-secondary w-100 btn-search\",\n      onClick: () => this.sendSearchResult(true, ''),\n      disabled: loading_api,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    }, \"Search Results\", /*#__PURE__*/React.createElement(FaSearch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 27\n      }\n    }))));\n  }\n\n}\n\nexport default SearchCard;","map":{"version":3,"sources":["/Users/chayankumawat/Desktop/react-stock-dashboard-master/src/components/SearchCard.js"],"names":["React","Component","stock","FaSearch","SearchCard","state","search_stockArray","loading_api","inputValue","disableSearchButton","btnDOM","document","querySelector","disabled","length","loadSavedStocks","localStorage","getItem","lsArray","JSON","parse","loadStocks","window","confirm","forEach","stockCode","sendSearchResult","removeItem","torf","value","stockValue","toUpperCase","startDate","Math","round","Date","getTime","endDate","includes","alert","setState","table_response","graph_response","Promise","all","get","params","symbol","token","resolution","from","to","data","c","h","l","o","pc","t","props","sendSearchGraphResult","response","prevState","error","console","handleInputChange","e","target","componentDidMount","componentDidUpdate","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport stock from '../apis/stock';\nimport '../css/SearchCard.css';\nimport '../css/styles.css';\nimport { FaSearch } from 'react-icons/fa';\n\nclass SearchCard extends Component {\n  state = {\n    search_stockArray: [],\n    loading_api: false,\n    inputValue: '',\n  };\n\n  componentDidMount() {\n    this.disableSearchButton();\n    this.loadSavedStocks();\n  }\n\n  componentDidUpdate() {\n    this.disableSearchButton();\n  }\n\n  disableSearchButton = () => {\n    const { inputValue } = this.state;\n    const btnDOM = document.querySelector('.btn-search');\n    btnDOM.disabled = !inputValue || inputValue.length > 4;\n  };\n\n  loadSavedStocks = () => {\n    if (localStorage.getItem('historyStockArray')) {\n      const lsArray = JSON.parse(localStorage.getItem('historyStockArray'));\n      const loadStocks = window.confirm('You have saved stocks. Would you like to load them?');\n      if (loadStocks) {\n        lsArray.forEach((stockCode) => this.sendSearchResult(false, stockCode));\n      } else {\n        localStorage.removeItem('historyStockArray');\n      }\n    }\n  };\n\n  sendSearchResult = async (torf, value) => {\n    const stockValue = torf\n      ? document.querySelector('.stock-code__value').value.toUpperCase()\n      : value;\n\n    const startDate = Math.round(new Date().getTime() / 1000);\n    const endDate = startDate - 72 * 3600;\n\n    if (this.state.search_stockArray.includes(stockValue)) {\n      alert('Already exists');\n      document.querySelector('.stock-code__value').value = '';\n      return;\n    }\n\n    try {\n      this.setState({ loading_api: true });\n\n      const [table_response, graph_response] = await Promise.all([\n        stock.get('/quote', {\n          params: {\n            symbol: stockValue,\n            token: 'bqhq9i7rh5rbubolrqd0',\n          },\n        }),\n        stock.get('/stock/candle', {\n          params: {\n            symbol: stockValue,\n            resolution: 5,\n            from: endDate,\n            to: startDate,\n            token: 'bqhq9i7rh5rbubolrqd0',\n          },\n        }),\n      ]);\n\n      if (\n        table_response.data.c === 0 &&\n        table_response.data.h === 0 &&\n        table_response.data.l === 0 &&\n        table_response.data.o === 0 &&\n        table_response.data.pc === 0 &&\n        table_response.data.t === 0\n      ) {\n        this.props.sendSearchGraphResult('no_data', '');\n      } else {\n        this.props.sendSearchGraphResult(true, {\n          stockValue,\n          response: graph_response.data,\n        });\n        this.props.sendSearchResult(table_response.data);\n      }\n\n      this.setState((prevState) => ({\n        search_stockArray: [...prevState.search_stockArray, stockValue],\n        loading_api: false,\n        inputValue: '', // Clear input field\n      }));\n    } catch (error) {\n      console.error('API error:', error);\n      this.setState({ loading_api: false });\n    }\n  };\n\n  handleInputChange = (e) => {\n    this.setState({ inputValue: e.target.value }, this.disableSearchButton);\n  };\n\n  render() {\n    const { inputValue, loading_api } = this.state;\n    return (\n      <div className=\"card card-container search\">\n        <div className=\"card-body\">\n          <h2 className=\"h6 mb-0\">Search Stock Code:</h2>\n          <input\n            type=\"text\"\n            className=\"form-control stock-code__value\"\n            placeholder=\"Stock Code (e.g. AAPL)\"\n            value={inputValue}\n            onChange={this.handleInputChange}\n          />\n          <button\n            className=\"btn btn-secondary w-100 btn-search\"\n            onClick={() => this.sendSearchResult(true, '')}\n            disabled={loading_api}\n          >\n            Search Results<FaSearch />\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SearchCard;\n"]},"metadata":{},"sourceType":"module"}