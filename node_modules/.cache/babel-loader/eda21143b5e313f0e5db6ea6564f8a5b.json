{"ast":null,"code":"var _jsxFileName = \"/Users/chayankumawat/Desktop/react-stock-dashboard-master/src/components/SearchCard.js\";\nimport React, { Component } from 'react';\nimport stock from '../apis/stock';\nimport '../css/SearchCard.css';\nimport '../css/styles.css';\nimport { FaSearch } from 'react-icons/fa';\n\nclass SearchCard extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      search_stockArray: [],\n      loading_api: false,\n      inputValue: ''\n    };\n\n    this.disableSearchButton = () => {\n      const {\n        inputValue\n      } = this.state;\n      const btnDOM = document.querySelector('.btn-search');\n      btnDOM.disabled = !inputValue || inputValue.length > 4;\n    };\n\n    this.loadSavedStocks = () => {\n      if (localStorage.getItem('historyStockArray') !== null) {\n        const lsArray = JSON.parse(localStorage.getItem('historyStockArray'));\n\n        if (window.confirm('You have saved stocks. Would you like to load them?')) {\n          lsArray.forEach(stockCode => this.sendSearchResult(false, stockCode));\n        } else {\n          localStorage.removeItem('historyStockArray');\n        }\n      }\n    };\n\n    this.sendSearchResult = async (torf, value) => {\n      const stockValue = torf ? document.querySelector('.stock-code__value').value.toUpperCase() : value;\n      const startDate = Math.round(new Date().getTime() / 1000);\n      const endDate = startDate - 72 * 3600;\n      let checkForExist = false;\n\n      if (this.state.search_stockArray.includes(stockValue)) {\n        alert('Already exists');\n        document.querySelector('.stock-code__value').value = '';\n      } else {\n        checkForExist = true;\n      }\n\n      try {\n        this.setState({\n          loading_api: true\n        });\n        const [table_response, graph_response] = await Promise.all([stock.get('/quote', {\n          params: {\n            symbol: stockValue,\n            token: 'bqhq9i7rh5rbubolrqd0'\n          }\n        }), stock.get('/stock/candle', {\n          params: {\n            symbol: stockValue,\n            resolution: 5,\n            from: endDate,\n            to: startDate,\n            token: 'bqhq9i7rh5rbubolrqd0'\n          }\n        })]);\n\n        if (checkForExist) {\n          if (table_response.data.c === 0 && table_response.data.h === 0 && table_response.data.l === 0 && table_response.data.o === 0 && table_response.data.pc === 0 && table_response.data.t === 0) {\n            this.props.sendSearchGraphResult('no_data', '');\n          } else {\n            this.props.sendSearchGraphResult(true, {\n              stockValue,\n              response: graph_response.data\n            });\n            this.props.sendSearchResult(table_response.data);\n            this.setState({\n              loading_api: false\n            });\n          }\n\n          document.querySelector('.stock-code__value').value = '';\n        }\n      } catch (error) {\n        console.error('API error:', error);\n        this.setState({\n          loading_api: false\n        });\n      }\n    };\n\n    this.handleInputChange = e => {\n      this.setState({\n        inputValue: e.target.value\n      }, this.disableSearchButton);\n    };\n  }\n\n  componentDidMount() {\n    this.disableSearchButton();\n    this.loadSavedStocks();\n  }\n\n  componentDidUpdate() {\n    this.disableSearchButton();\n  }\n\n  render() {\n    const {\n      inputValue,\n      loading_api\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-container search\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"h6 mb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }\n    }, \"Search Stock Code:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control stock-code__value\",\n      placeholder: \"Stock Code (e.g. AAPL)\",\n      value: inputValue,\n      onChange: this.handleInputChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-secondary w-100 btn-search\",\n      onClick: () => this.sendSearchResult(true, ''),\n      disabled: loading_api,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }, \"Search Results\", /*#__PURE__*/React.createElement(FaSearch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 27\n      }\n    }))));\n  }\n\n}\n\nexport default SearchCard;","map":{"version":3,"sources":["/Users/chayankumawat/Desktop/react-stock-dashboard-master/src/components/SearchCard.js"],"names":["React","Component","stock","FaSearch","SearchCard","state","search_stockArray","loading_api","inputValue","disableSearchButton","btnDOM","document","querySelector","disabled","length","loadSavedStocks","localStorage","getItem","lsArray","JSON","parse","window","confirm","forEach","stockCode","sendSearchResult","removeItem","torf","value","stockValue","toUpperCase","startDate","Math","round","Date","getTime","endDate","checkForExist","includes","alert","setState","table_response","graph_response","Promise","all","get","params","symbol","token","resolution","from","to","data","c","h","l","o","pc","t","props","sendSearchGraphResult","response","error","console","handleInputChange","e","target","componentDidMount","componentDidUpdate","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport stock from '../apis/stock';\nimport '../css/SearchCard.css';\nimport '../css/styles.css';\nimport { FaSearch } from 'react-icons/fa';\n\nclass SearchCard extends Component {\n  state = {\n    search_stockArray: [],\n    loading_api: false,\n    inputValue: '',\n  };\n\n  componentDidMount() {\n    this.disableSearchButton();\n    this.loadSavedStocks();\n  }\n\n  componentDidUpdate() {\n    this.disableSearchButton();\n  }\n\n  disableSearchButton = () => {\n    const { inputValue } = this.state;\n    const btnDOM = document.querySelector('.btn-search');\n    btnDOM.disabled = !inputValue || inputValue.length > 4;\n  };\n\n  loadSavedStocks = () => {\n    if (localStorage.getItem('historyStockArray') !== null) {\n      const lsArray = JSON.parse(localStorage.getItem('historyStockArray'));\n      if (window.confirm('You have saved stocks. Would you like to load them?')) {\n        lsArray.forEach((stockCode) => this.sendSearchResult(false, stockCode));\n      } else {\n        localStorage.removeItem('historyStockArray');\n      }\n    }\n  };\n\n  sendSearchResult = async (torf, value) => {\n    const stockValue = torf ? document.querySelector('.stock-code__value').value.toUpperCase() : value;\n    const startDate = Math.round(new Date().getTime() / 1000);\n    const endDate = startDate - 72 * 3600;\n    let checkForExist = false;\n\n    if (this.state.search_stockArray.includes(stockValue)) {\n      alert('Already exists');\n      document.querySelector('.stock-code__value').value = '';\n    } else {\n      checkForExist = true;\n    }\n\n    try {\n      this.setState({ loading_api: true });\n\n      const [table_response, graph_response] = await Promise.all([\n        stock.get('/quote', {\n          params: {\n            symbol: stockValue,\n            token: 'bqhq9i7rh5rbubolrqd0',\n          },\n        }),\n        stock.get('/stock/candle', {\n          params: {\n            symbol: stockValue,\n            resolution: 5,\n            from: endDate,\n            to: startDate,\n            token: 'bqhq9i7rh5rbubolrqd0',\n          },\n        }),\n      ]);\n\n      if (checkForExist) {\n        if (\n          table_response.data.c === 0 &&\n          table_response.data.h === 0 &&\n          table_response.data.l === 0 &&\n          table_response.data.o === 0 &&\n          table_response.data.pc === 0 &&\n          table_response.data.t === 0\n        ) {\n          this.props.sendSearchGraphResult('no_data', '');\n        } else {\n          this.props.sendSearchGraphResult(true, {\n            stockValue,\n            response: graph_response.data,\n          });\n          this.props.sendSearchResult(table_response.data);\n          this.setState({ loading_api: false });\n        }\n        document.querySelector('.stock-code__value').value = '';\n      }\n    } catch (error) {\n      console.error('API error:', error);\n      this.setState({ loading_api: false });\n    }\n  };\n\n  handleInputChange = (e) => {\n    this.setState({ inputValue: e.target.value }, this.disableSearchButton);\n  };\n\n  render() {\n    const { inputValue, loading_api } = this.state;\n    return (\n      <div className=\"card card-container search\">\n        <div className=\"card-body\">\n          <h2 className=\"h6 mb-0\">Search Stock Code:</h2>\n          <input\n            type=\"text\"\n            className=\"form-control stock-code__value\"\n            placeholder=\"Stock Code (e.g. AAPL)\"\n            value={inputValue}\n            onChange={this.handleInputChange}\n          />\n          <button\n            className=\"btn btn-secondary w-100 btn-search\"\n            onClick={() => this.sendSearchResult(true, '')}\n            disabled={loading_api}\n          >\n            Search Results<FaSearch />\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SearchCard;\n"]},"metadata":{},"sourceType":"module"}