{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chayankumawat/Desktop/react-stock-dashboard-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/chayankumawat/Desktop/react-stock-dashboard-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/chayankumawat/Desktop/react-stock-dashboard-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _asyncToGenerator from\"/Users/chayankumawat/Desktop/react-stock-dashboard-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/chayankumawat/Desktop/react-stock-dashboard-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/chayankumawat/Desktop/react-stock-dashboard-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/chayankumawat/Desktop/react-stock-dashboard-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/chayankumawat/Desktop/react-stock-dashboard-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import stock from'../apis/stock';import'../css/SearchCard.css';import'../css/styles.css';import{FaSearch}from'react-icons/fa';var SearchCard=/*#__PURE__*/function(_Component){_inherits(SearchCard,_Component);var _super=_createSuper(SearchCard);function SearchCard(){var _this;_classCallCheck(this,SearchCard);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={search_stockArray:[],loading_api:false,inputValue:''};_this.disableSearchButton=function(){var inputValue=_this.state.inputValue;var btnDOM=document.querySelector('.btn-search');btnDOM.disabled=!inputValue||inputValue.length>4;};_this.loadSavedStocks=function(){if(localStorage.getItem('historyStockArray')){var lsArray=JSON.parse(localStorage.getItem('historyStockArray'));var loadStocks=window.confirm('You have saved stocks. Would you like to load them?');if(loadStocks){lsArray.forEach(function(stockCode){return _this.sendSearchResult(false,stockCode);});}else{localStorage.removeItem('historyStockArray');}}};_this.sendSearchResult=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(torf,value){var stockValue,startDate,endDate,_yield$Promise$all,_yield$Promise$all2,table_response,graph_response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:stockValue=torf?document.querySelector('.stock-code__value').value.toUpperCase():value;startDate=Math.round(new Date().getTime()/1000);endDate=startDate-72*3600;if(!_this.state.search_stockArray.includes(stockValue)){_context.next=7;break;}alert('Already exists');document.querySelector('.stock-code__value').value='';return _context.abrupt(\"return\");case 7:_context.prev=7;_this.setState({loading_api:true});_context.next=11;return Promise.all([stock.get('/quote',{params:{symbol:stockValue,token:'bqhq9i7rh5rbubolrqd0'}}),stock.get('/stock/candle',{params:{symbol:stockValue,resolution:5,from:endDate,to:startDate,token:'bqhq9i7rh5rbubolrqd0'}})]);case 11:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,2);table_response=_yield$Promise$all2[0];graph_response=_yield$Promise$all2[1];if(table_response.data.c===0&&table_response.data.h===0&&table_response.data.l===0&&table_response.data.o===0&&table_response.data.pc===0&&table_response.data.t===0){_this.props.sendSearchGraphResult('no_data','');}else{_this.props.sendSearchGraphResult(true,{stockValue:stockValue,response:graph_response.data});_this.props.sendSearchResult(table_response.data);}_this.setState(function(prevState){return{search_stockArray:[].concat(_toConsumableArray(prevState.search_stockArray),[stockValue]),loading_api:false,inputValue:''// Clear input field\n};});_context.next=23;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](7);console.error('API error:',_context.t0);_this.setState({loading_api:false});case 23:case\"end\":return _context.stop();}}},_callee,null,[[7,19]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();_this.handleInputChange=function(e){_this.setState({inputValue:e.target.value},_this.disableSearchButton);};return _this;}_createClass(SearchCard,[{key:\"componentDidMount\",value:function componentDidMount(){this.disableSearchButton();this.loadSavedStocks();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.disableSearchButton();}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,inputValue=_this$state.inputValue,loading_api=_this$state.loading_api;return/*#__PURE__*/React.createElement(\"div\",{className:\"card card-container search\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"h6 mb-0\"},\"Search Stock Code:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control stock-code__value\",placeholder:\"Stock Code (e.g. AAPL)\",value:inputValue,onChange:this.handleInputChange}),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-secondary w-100 btn-search\",onClick:function onClick(){return _this2.sendSearchResult(true,'');},disabled:loading_api},\"Search Results\",/*#__PURE__*/React.createElement(FaSearch,null))));}}]);return SearchCard;}(Component);export default SearchCard;","map":{"version":3,"sources":["/Users/chayankumawat/Desktop/react-stock-dashboard-master/src/components/SearchCard.js"],"names":["React","Component","stock","FaSearch","SearchCard","state","search_stockArray","loading_api","inputValue","disableSearchButton","btnDOM","document","querySelector","disabled","length","loadSavedStocks","localStorage","getItem","lsArray","JSON","parse","loadStocks","window","confirm","forEach","stockCode","sendSearchResult","removeItem","torf","value","stockValue","toUpperCase","startDate","Math","round","Date","getTime","endDate","includes","alert","setState","Promise","all","get","params","symbol","token","resolution","from","to","table_response","graph_response","data","c","h","l","o","pc","t","props","sendSearchGraphResult","response","prevState","console","error","handleInputChange","e","target"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport stock from '../apis/stock';\nimport '../css/SearchCard.css';\nimport '../css/styles.css';\nimport { FaSearch } from 'react-icons/fa';\n\nclass SearchCard extends Component {\n  state = {\n    search_stockArray: [],\n    loading_api: false,\n    inputValue: '',\n  };\n\n  componentDidMount() {\n    this.disableSearchButton();\n    this.loadSavedStocks();\n  }\n\n  componentDidUpdate() {\n    this.disableSearchButton();\n  }\n\n  disableSearchButton = () => {\n    const { inputValue } = this.state;\n    const btnDOM = document.querySelector('.btn-search');\n    btnDOM.disabled = !inputValue || inputValue.length > 4;\n  };\n\n  loadSavedStocks = () => {\n    if (localStorage.getItem('historyStockArray')) {\n      const lsArray = JSON.parse(localStorage.getItem('historyStockArray'));\n      const loadStocks = window.confirm('You have saved stocks. Would you like to load them?');\n      if (loadStocks) {\n        lsArray.forEach((stockCode) => this.sendSearchResult(false, stockCode));\n      } else {\n        localStorage.removeItem('historyStockArray');\n      }\n    }\n  };\n\n  sendSearchResult = async (torf, value) => {\n    const stockValue = torf\n      ? document.querySelector('.stock-code__value').value.toUpperCase()\n      : value;\n\n    const startDate = Math.round(new Date().getTime() / 1000);\n    const endDate = startDate - 72 * 3600;\n\n    if (this.state.search_stockArray.includes(stockValue)) {\n      alert('Already exists');\n      document.querySelector('.stock-code__value').value = '';\n      return;\n    }\n\n    try {\n      this.setState({ loading_api: true });\n\n      const [table_response, graph_response] = await Promise.all([\n        stock.get('/quote', {\n          params: {\n            symbol: stockValue,\n            token: 'bqhq9i7rh5rbubolrqd0',\n          },\n        }),\n        stock.get('/stock/candle', {\n          params: {\n            symbol: stockValue,\n            resolution: 5,\n            from: endDate,\n            to: startDate,\n            token: 'bqhq9i7rh5rbubolrqd0',\n          },\n        }),\n      ]);\n\n      if (\n        table_response.data.c === 0 &&\n        table_response.data.h === 0 &&\n        table_response.data.l === 0 &&\n        table_response.data.o === 0 &&\n        table_response.data.pc === 0 &&\n        table_response.data.t === 0\n      ) {\n        this.props.sendSearchGraphResult('no_data', '');\n      } else {\n        this.props.sendSearchGraphResult(true, {\n          stockValue,\n          response: graph_response.data,\n        });\n        this.props.sendSearchResult(table_response.data);\n      }\n\n      this.setState((prevState) => ({\n        search_stockArray: [...prevState.search_stockArray, stockValue],\n        loading_api: false,\n        inputValue: '', // Clear input field\n      }));\n    } catch (error) {\n      console.error('API error:', error);\n      this.setState({ loading_api: false });\n    }\n  };\n\n  handleInputChange = (e) => {\n    this.setState({ inputValue: e.target.value }, this.disableSearchButton);\n  };\n\n  render() {\n    const { inputValue, loading_api } = this.state;\n    return (\n      <div className=\"card card-container search\">\n        <div className=\"card-body\">\n          <h2 className=\"h6 mb-0\">Search Stock Code:</h2>\n          <input\n            type=\"text\"\n            className=\"form-control stock-code__value\"\n            placeholder=\"Stock Code (e.g. AAPL)\"\n            value={inputValue}\n            onChange={this.handleInputChange}\n          />\n          <button\n            className=\"btn btn-secondary w-100 btn-search\"\n            onClick={() => this.sendSearchResult(true, '')}\n            disabled={loading_api}\n          >\n            Search Results<FaSearch />\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SearchCard;\n"]},"metadata":{},"sourceType":"module"}